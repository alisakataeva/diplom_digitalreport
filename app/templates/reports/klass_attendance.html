{% extends 'index.html' %}

{% block content %}

<h1>Отчет классного руководителя о посещаемости</h1>

<table class="table table-bordered">
  <thead>
    <tr>

      <th>Период</th>
      <th>ФИО учителя</th>
      <th>Класс</th>

      <th>ФИО обучающегося</th>
      <th>По болезни</th>
      <th>По уважительной причине</th>
      <th>Прогулы</th>
      <th>Всего</th>

    </tr>
  </thead>
  <tbody>
    {% for key, row in rows.items %}

      {% for student_id, student in row.data.students.items %}

        {% if forloop.first %}
        <tr>
          <td rowspan="{{ row.data.students_count|add:'+1' }}">{{ key }}</td>
          <td rowspan="{{ row.data.students_count|add:'+1' }}">{{ row.data.teacher }}</td>
          <td rowspan="{{ row.data.students_count|add:'+1' }}">{{ row.data.klass }}</td>
        {% else %}
        <tr>
        {% endif %}
          <td>{{ student.name }}</td>
          <td>{{ student.skips_desease }}</td>
          <td>{{ student.skips_reasonable }}</td>
          <td>{{ student.skips }}</td>
          <td>{{ student.all_skips }}</td>
        </tr>

      {% endfor %}

      <tr class="table-success">
        <td>Итог</td>
        <td>{{ row.data.total_skips_desease }}</td>
        <td>{{ row.data.total_skips_reasonable }}</td>
        <td>{{ row.data.total_skips }}</td>
        <td>{{ row.data.total_all_skips }}</td>
      </tr>

    {% endfor %}
  </tbody>
</table>

{% endblock %}